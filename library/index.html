<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Digital Library</title>
    <!-- Use the provided Tailwind CDN and configuration -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "sans-serif"],
            },
            colors: {
              primary: "#4F46E5",
              secondary: "#6366F1",
              accent: "#818CF8",
              dark: "#1F2937",
              light: "#F3F4F6",
              grayish: "#6B7280",
            },
          },
        },
      };
    </script>
    <style>
      /* Custom styles to enhance the design */
      body {
        background-color: #f3f4f6; /* light color from the theme */
      }
      .container {
        max-width: 1280px;
      }
      .book-card {
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      }
      .book-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
      }
      .nav-link.active {
        font-weight: bold;
        color: #4f46e5;
      }
      /* Style for the chapter list */
      .chapter-list {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      .chapter-list li {
        padding: 0.75rem 1rem;
        border-bottom: 1px solid #e5e7eb;
        cursor: pointer;
        transition: background-color 0.2s;
      }
      .chapter-list li:hover {
        background-color: #f9fafb;
      }
      .chapter-list li:last-child {
        border-bottom: none;
      }
    </style>
  </head>
  <body class="font-sans text-dark">
    <!-- Main container for the entire layout -->
    <div class="container mx-auto p-4 md:p-8">
      <!-- Header & Navigation -->
      <header
        class="flex flex-col md:flex-row justify-between items-center bg-white p-6 rounded-3xl shadow-lg mb-8"
      >
        <h1 class="text-3xl font-bold text-primary mb-4 md:mb-0">
          Digital Library
        </h1>
        <nav
          class="flex flex-wrap justify-center md:space-x-8 text-grayish font-medium"
        >
          <a
            href="#home"
            class="nav-link active hover:text-primary transition duration-300 mx-2 mb-2 md:mx-0"
            >Home</a
          >
          <a
            href="#catalog"
            class="nav-link hover:text-primary transition duration-300 mx-2 mb-2 md:mx-0"
            >Catalog</a
          >
          <a
            href="#about"
            class="nav-link hover:text-primary transition duration-300 mx-2 mb-2 md:mx-0"
            >About</a
          >
          <a
            href="#contact"
            class="nav-link hover:text-primary transition duration-300 mx-2 mb-2 md:mx-0"
            >Contact</a
          >
        </nav>
      </header>

      <!-- Main Content Section - Dynamically loaded -->
      <main id="main-content" class="min-h-screen">
        <!-- Content will be injected here via JavaScript -->
      </main>

      <!-- Footer -->
      <footer class="text-center text-grayish mt-10 p-4">
        &copy; 2024 Digital Library. All rights reserved.
      </footer>

      <!-- PDF Viewer Modal -->
      <div
        id="pdf-viewer-modal"
        class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50"
      >
        <div
          class="bg-white p-6 rounded-3xl shadow-lg w-full max-w-4xl h-full max-h-[80vh] flex flex-col"
        >
          <div
            class="flex justify-between items-center pb-4 mb-4 border-b border-gray-200"
          >
            <h3 id="pdf-title" class="text-2xl font-bold text-dark"></h3>
            <button
              id="close-pdf-viewer"
              class="text-gray-500 hover:text-gray-800 transition duration-300"
            >
              &times;
            </button>
          </div>
          <div
            id="pdf-content"
            class="flex-grow overflow-y-auto text-grayish leading-relaxed"
          >
            <!-- Placeholder text to simulate a book's content -->
            <p>
              "The Lord of the Rings" is an epic high-fantasy novel by the
              English author and scholar J. R. R. Tolkien. Set in Middle-earth,
              the story began as a sequel to Tolkien's 1937 children's fantasy
              novel The Hobbit, but eventually developed into a much larger
              work. Written in stages between 1937 and 1949, The Lord of the
              Rings is one of the best-selling novels ever written, with over
              150 million copies sold. The title refers to the story's main
              antagonist, the Dark Lord Sauron, who in an earlier age had
              created the One Ring to rule the other Rings of Power as the
              ultimate weapon in his campaign to conquer Middle-earth. The story
              is told in three volumes: The Fellowship of the Ring, The Two
              Towers, and The Return of the King.
            </p>
            <br />
            <p>
              The novel is renowned for its intricate world-building, rich
              mythology, and complex characters. Tolkien's love for language is
              evident in the detailed linguistic constructions and the inclusion
              of various poems, songs, and historical documents within the
              narrative. The themes of friendship, sacrifice, good versus evil,
              and the corrupting influence of power are central to the story.
              The journey of the hobbit Frodo Baggins to destroy the One Ring is
              a perilous one, filled with encounters with diverse creatures and
              races, and requiring the aid of a fellowship of companions from
              different walks of life. The story's lasting appeal lies in its
              exploration of these universal themes and its creation of a
              believable and immersive fantasy world.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript for dynamic page loading -->
    <script>
      // Mock data for the library to simulate a backend API
      const libraryData = [
        {
          id: "1",
          title: "The Lord of the Rings",
          author: "J.R.R. Tolkien",
          cover:
            "data:image/jpeg;base64,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",
          description:
            "A classic high-fantasy novel by J. R. R. Tolkien. The story began as a sequel to Tolkien's 1937 fantasy novel The Hobbit, but eventually developed into a much larger work.",
          chapters: [
            "Book I: The Fellowship of the Ring",
            "Book II: The Fellowship of the Ring",
            "Book III: The Two Towers",
            "Book IV: The Two Towers",
            "Book V: The Return of the King",
            "Book VI: The Return of the King",
          ],
        },
        {
          id: "2",
          title: "Dune",
          author: "Frank Herbert",
          cover: "https://placehold.co/300x450/secondary/light?text=Dune",
          description:
            "A 1965 epic science fiction novel by American author Frank Herbert. It is the first installment of the Dune saga. It won the inaugural Nebula Award for Best Novel in 1966.",
          chapters: [
            "Part I: Dune",
            "Part II: Muad'Dib",
            "Part III: The Prophet",
          ],
        },
        {
          id: "3",
          title: "1984",
          author: "George Orwell",
          cover: "https://placehold.co/300x450/dark/light?text=1984",
          description:
            "A dystopian social science fiction novel and cautionary tale by English author George Orwell. It was published on 8 June 1949 by Secker & Warburg as Orwell's ninth and final book completed in his lifetime.",
          chapters: ["Part One", "Part Two", "Part Three"],
        },
        {
          id: "4",
          title: "Pride and Prejudice",
          author: "Jane Austen",
          cover:
            "https://placehold.co/300x450/accent/light?text=Pride+and+Prejudice",
          description:
            "A romantic novel of manners written by Jane Austen in 1813. The novel follows the character development of Elizabeth Bennet, the protagonist of the book.",
          chapters: [
            "Volume I: Chapters 1-23",
            "Volume II: Chapters 24-42",
            "Volume III: Chapters 43-61",
          ],
        },
        {
          id: "5",
          title: "To Kill a Mockingbird",
          author: "Harper Lee",
          cover:
            "https://placehold.co/300x450/secondary/light?text=To+Kill+a+Mockingbird",
          description:
            "A novel by Harper Lee published in 1960. It was instantly successful, winning the Pulitzer Prize, and has become a classic of modern American literature.",
          chapters: ["Part One: Chapters 1-11", "Part Two: Chapters 12-31"],
        },
      ];

      // Get the main content area to inject content into
      const mainContent = document.getElementById("main-content");
      const navLinks = document.querySelectorAll(".nav-link");
      const pdfViewerModal = document.getElementById("pdf-viewer-modal");
      const closePdfViewerBtn = document.getElementById("close-pdf-viewer");

      // Function to render the Home page content
      const renderHomePage = () => {
        mainContent.innerHTML = `
                <section class="text-center p-8 bg-white rounded-3xl shadow-lg mb-8">
                    <h2 class="text-4xl font-bold text-primary mb-4">Welcome to Your Digital Library</h2>
                    <p class="text-grayish text-lg mb-6">Explore a world of knowledge and stories. Find your next favorite book with ease.</p>
                    <button id="cta-button" class="bg-primary hover:bg-secondary text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">Explore Catalog</button>
                </section>
                
                <section class="mt-8">
                    <h3 class="text-2xl font-bold text-dark mb-6">Featured Books</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                        ${libraryData
                          .map(
                            (book) => `
                            <div class="book-card bg-white rounded-2xl shadow-md overflow-hidden cursor-pointer" onclick="renderBookDetails('${book.id}')">
                                <img src="${book.cover}" alt="Book Cover" class="w-full h-auto object-cover rounded-t-2xl">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold text-dark">${book.title}</h4>
                                    <p class="text-sm text-grayish">${book.author}</p>
                                </div>
                            </div>
                        `
                          )
                          .join("")}
                    </div>
                </section>
            `;
        // Add event listener to the CTA button
        document
          .getElementById("cta-button")
          .addEventListener("click", () => navigateTo("catalog"));
      };

      // Function to render the Catalog page content
      const renderCatalogPage = () => {
        mainContent.innerHTML = `
                <section class="p-8 bg-white rounded-3xl shadow-lg mb-8">
                    <h2 class="text-4xl font-bold text-primary mb-6">All Books</h2>
                    <div class="relative mb-6">
                        <input type="text" id="search-input" placeholder="Search by title or author..." class="w-full p-4 rounded-full border border-grayish focus:outline-none focus:ring-2 focus:ring-accent transition duration-300 pl-12">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-400 absolute left-4 top-1/2 transform -translate-y-1/2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.197 5.197a7.5 7.5 0 0 0 10.607 10.607Z" />
                        </svg>
                    </div>
                    
                    <div id="book-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                        <!-- Book cards will be rendered here -->
                    </div>
                </section>
            `;

        const bookListContainer = document.getElementById("book-list");
        const searchInput = document.getElementById("search-input");

        // Function to render book cards
        const renderBooks = (books) => {
          bookListContainer.innerHTML = books
            .map(
              (book) => `
                    <div class="book-card bg-white rounded-2xl shadow-md overflow-hidden cursor-pointer" onclick="renderBookDetails('${book.id}')">
                        <img src="${book.cover}" alt="Book Cover" class="w-full h-auto object-cover rounded-t-2xl">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold text-dark">${book.title}</h4>
                            <p class="text-sm text-grayish">${book.author}</p>
                        </div>
                    </div>
                `
            )
            .join("");
        };

        // Initial render of all books
        renderBooks(libraryData);

        // Add search functionality
        searchInput.addEventListener("input", (e) => {
          const query = e.target.value.toLowerCase();
          const filteredBooks = libraryData.filter(
            (book) =>
              book.title.toLowerCase().includes(query) ||
              book.author.toLowerCase().includes(query)
          );
          renderBooks(filteredBooks);
        });
      };

      // Function to render the About page content
      const renderAboutPage = () => {
        mainContent.innerHTML = `
                <section class="p-8 bg-white rounded-3xl shadow-lg mb-8">
                    <h2 class="text-4xl font-bold text-primary mb-6">About Our Digital Library</h2>
                    <p class="text-lg text-dark mb-4">
                        Welcome to the Digital Library, your gateway to a world of stories, knowledge, and imagination. Our mission is to provide free and easy access to a vast collection of books for readers everywhere.
                    </p>
                    <p class="text-lg text-dark">
                        We believe that every book holds a new adventure and that learning should be accessible to all. Our growing catalog includes classic literature, modern fiction, and academic works, all curated to help you discover your next favorite read.
                    </p>
                </section>
            `;
      };

      // Function to render the Contact page content
      const renderContactPage = () => {
        mainContent.innerHTML = `
                <section class="p-8 bg-white rounded-3xl shadow-lg mb-8">
                    <h2 class="text-4xl font-bold text-primary mb-6">Contact Us</h2>
                    <p class="text-lg text-dark mb-6">
                        Have a question, suggestion, or just want to say hello? We'd love to hear from you! Fill out the form below and we'll get back to you as soon as possible.
                    </p>
                    <form class="space-y-4">
                        <div>
                            <label for="name" class="block text-grayish font-medium mb-1">Name</label>
                            <input type="text" id="name" name="name" class="w-full p-3 rounded-xl border border-grayish focus:outline-none focus:ring-2 focus:ring-accent">
                        </div>
                        <div>
                            <label for="email" class="block text-grayish font-medium mb-1">Email</label>
                            <input type="email" id="email" name="email" class="w-full p-3 rounded-xl border border-grayish focus:outline-none focus:ring-2 focus:ring-accent">
                        </div>
                        <div>
                            <label for="message" class="block text-grayish font-medium mb-1">Message</label>
                            <textarea id="message" name="message" rows="4" class="w-full p-3 rounded-xl border border-grayish focus:outline-none focus:ring-2 focus:ring-accent"></textarea>
                        </div>
                        <button type="submit" class="bg-primary hover:bg-secondary text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">Send Message</button>
                    </form>
                </section>
            `;
      };

      // Function to render a single book's detail page
      const renderBookDetails = (bookId) => {
        const book = libraryData.find((b) => b.id === bookId);
        if (!book) {
          mainContent.innerHTML = `<div class="p-8 text-center text-grayish">Book not found.</div>`;
          return;
        }

        mainContent.innerHTML = `
                <section class="p-8 bg-white rounded-3xl shadow-lg flex flex-col md:flex-row gap-8">
                    <div class="md:w-1/3">
                        <img src="${
                          book.cover
                        }" alt="Book Cover" class="w-full rounded-2xl shadow-xl">
                    </div>
                    <div class="md:w-2/3 flex flex-col">
                        <h2 class="text-4xl font-bold text-primary mb-2">${
                          book.title
                        }</h2>
                        <h3 class="text-xl text-grayish mb-4">by ${
                          book.author
                        }</h3>
                        <p class="text-lg text-dark mb-6">${
                          book.description
                        }</p>
                        <div class="flex flex-col sm:flex-row gap-4 mb-8">
                            <button id="read-pdf-btn" class="bg-primary hover:bg-secondary text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">Read PDF</button>
                            <button id="listen-audio-btn" class="bg-gray-200 hover:bg-gray-300 text-dark font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 mr-2">
                                    <path d="M13.5 4.5a4.5 4.5 0 1 1 6.573 5.484 3.75 3.75 0 0 1-1.008 3.847 6.75 6.75 0 0 0-3.429 6.002v2.25z" />
                                    <path d="M12 2.25a.75.75 0 0 1 .75.75v16.5a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75Z" />
                                </svg>
                                Listen to Audiobook
                            </button>
                        </div>
                        
                        <!-- Chapter List Section -->
                        <div class="bg-light p-6 rounded-2xl">
                            <h4 class="text-xl font-semibold text-dark mb-4">Chapters</h4>
                            <ul class="chapter-list">
                                ${book.chapters
                                  .map(
                                    (chapter) => `
                                    <li class="flex justify-between items-center">
                                        <span>${chapter}</span>
                                        <button class="text-primary hover:underline transition duration-300 text-sm">Read Chapter</button>
                                    </li>
                                `
                                  )
                                  .join("")}
                            </ul>
                        </div>
                    </div>
                </section>
                <div class="mt-8 text-center">
                    <button onclick="navigateTo('catalog')" class="text-primary hover:underline transition duration-300">&larr; Back to Catalog</button>
                </div>
            `;

        // Add event listeners for the new buttons
        document
          .getElementById("read-pdf-btn")
          .addEventListener("click", () => {
            document.getElementById("pdf-title").textContent = book.title;
            pdfViewerModal.classList.remove("hidden");
          });

        closePdfViewerBtn.addEventListener("click", () => {
          pdfViewerModal.classList.add("hidden");
        });

        const listenAudioBtn = document.getElementById("listen-audio-btn");
        listenAudioBtn.addEventListener("click", async () => {
          // Change button text to indicate loading
          listenAudioBtn.textContent = "Generating...";
          listenAudioBtn.disabled = true;

          try {
            const audio = await generateAudio(book.description);
            if (audio) {
              const audioPlayer = new Audio(audio);
              audioPlayer.play();
              listenAudioBtn.textContent = "Playing...";
              audioPlayer.onended = () => {
                listenAudioBtn.innerHTML =
                  '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 mr-2"><path d="M13.5 4.5a4.5 4.5 0 1 1 6.573 5.484 3.75 3.75 0 0 1-1.008 3.847 6.75 6.75 0 0 0-3.429 6.002v2.25z" /><path d="M12 2.25a.75.75 0 0 1 .75.75v16.5a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75Z" /></svg> Listen to Audiobook';
                listenAudioBtn.disabled = false;
              };
            } else {
              throw new Error("Failed to generate audio.");
            }
          } catch (error) {
            console.error("Error generating or playing audio:", error);
            listenAudioBtn.textContent = "Error!";
            setTimeout(() => {
              listenAudioBtn.innerHTML =
                '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 mr-2"><path d="M13.5 4.5a4.5 4.5 0 1 1 6.573 5.484 3.75 3.75 0 0 1-1.008 3.847 6.75 6.75 0 0 0-3.429 6.002v2.25z" /><path d="M12 2.25a.75.75 0 0 1 .75.75v16.5a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75Z" /></svg> Listen to Audiobook';
              listenAudioBtn.disabled = false;
            }, 2000);
          }
        });
      };

      // Function to convert base64 to ArrayBuffer
      const base64ToArrayBuffer = (base64) => {
        const binaryString = window.atob(base64);
        const len = binaryString.length;
        const bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
          bytes[i] = binaryString.charCodeAt(i);
        }
        return bytes.buffer;
      };

      // Function to convert PCM audio data to a WAV blob
      const pcmToWav = (pcmData, sampleRate) => {
        const pcm16 = new Int16Array(pcmData);
        const numChannels = 1;
        const byteRate = sampleRate * numChannels * 2;
        const blockAlign = numChannels * 2;

        const wavBuffer = new ArrayBuffer(44 + pcm16.length * 2);
        const view = new DataView(wavBuffer);

        // RIFF chunk
        writeString(view, 0, "RIFF");
        view.setUint32(4, 36 + pcm16.length * 2, true);
        writeString(view, 8, "WAVE");

        // fmt chunk
        writeString(view, 12, "fmt ");
        view.setUint32(16, 16, true);
        view.setUint16(20, 1, true); // PCM format
        view.setUint16(22, numChannels, true);
        view.setUint32(24, sampleRate, true);
        view.setUint32(28, byteRate, true);
        view.setUint16(32, blockAlign, true);
        view.setUint16(34, 16, true); // 16 bits per sample

        // data chunk
        writeString(view, 36, "data");
        view.setUint32(40, pcm16.length * 2, true);

        // Write PCM data
        for (let i = 0; i < pcm16.length; i++) {
          view.setInt16(44 + i * 2, pcm16[i], true);
        }

        return new Blob([view], { type: "audio/wav" });
      };

      const writeString = (view, offset, string) => {
        for (let i = 0; i < string.length; i++) {
          view.setUint8(offset + i, string.charCodeAt(i));
        }
      };

      // Exponential backoff for API calls
      const withExponentialBackoff = async (
        fn,
        maxRetries = 5,
        delay = 1000
      ) => {
        for (let i = 0; i < maxRetries; i++) {
          try {
            return await fn();
          } catch (error) {
            if (i === maxRetries - 1) throw error;
            await new Promise((resolve) =>
              setTimeout(resolve, delay * Math.pow(2, i))
            );
          }
        }
      };

      // Function to generate and play audio using Gemini API
      const generateAudio = async (text) => {
        try {
          const payload = {
            contents: [
              {
                parts: [{ text: `Say in a smooth voice: ${text}` }],
              },
            ],
            generationConfig: {
              responseModalities: ["AUDIO"],
              speechConfig: {
                voiceConfig: {
                  prebuiltVoiceConfig: { voiceName: "Algieba" },
                },
              },
            },
            model: "gemini-2.5-flash-preview-tts",
          };
          const apiKey = "";
          const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;

          const response = await withExponentialBackoff(async () => {
            return await fetch(apiUrl, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            });
          });

          const result = await response.json();
          const part = result?.candidates?.[0]?.content?.parts?.[0];
          const audioData = part?.inlineData?.data;
          const mimeType = part?.inlineData?.mimeType;

          if (audioData && mimeType && mimeType.startsWith("audio/")) {
            const sampleRate = parseInt(mimeType.match(/rate=(\d+)/)[1], 10);
            const pcmData = base64ToArrayBuffer(audioData);
            const wavBlob = pcmToWav(pcmData, sampleRate);
            return URL.createObjectURL(wavBlob);
          } else {
            console.error("Audio data or mime type missing from API response.");
            return null;
          }
        } catch (error) {
          console.error("Failed to generate audio:", error);
          return null;
        }
      };

      // Simple router function to handle navigation
      const navigateTo = (page) => {
        navLinks.forEach((link) => {
          link.classList.remove("active");
        });

        switch (page) {
          case "home":
            renderHomePage();
            document.querySelector('a[href="#home"]').classList.add("active");
            break;
          case "catalog":
            renderCatalogPage();
            document
              .querySelector('a[href="#catalog"]')
              .classList.add("active");
            break;
          case "about":
            renderAboutPage();
            document.querySelector('a[href="#about"]').classList.add("active");
            break;
          case "contact":
            renderContactPage();
            document
              .querySelector('a[href="#contact"]')
              .classList.add("active");
            break;
          case "book-details":
            // This case is handled directly by renderBookDetails function
            break;
          default:
            // Fallback to home page if the link is not handled
            renderHomePage();
            document.querySelector('a[href="#home"]').classList.add("active");
            break;
        }
      };

      // Handle URL hash changes for navigation
      window.addEventListener("hashchange", () => {
        const page = window.location.hash.slice(1);
        navigateTo(page || "home");
      });

      // Initial page load based on URL hash or default to home
      document.addEventListener("DOMContentLoaded", () => {
        const page = window.location.hash.slice(1);
        navigateTo(page || "home");
      });

      // Expose functions to the global scope for onclick events
      window.renderBookDetails = renderBookDetails;
      window.navigateTo = navigateTo;
    </script>
  </body>
</html>
