<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description"
        content="Empowering students with learning disabilities through personalized, accessible learning experiences in Math, ELA, and Science." />
    <meta name="keywords"
        content="learning disabilities, personalized education, online learning, math, ELA, science, accessible education" />
    <meta name="author" content="Hesten's Learning" />

    <!-- PWA & Mobile Meta Tags -->
    <meta name="theme-color" content="#4F46E5" />
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Hesten's">

    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="Hesten's Learning" />
    <meta property="og:description"
        content="Personalized, accessible learning for everyone." />
    <meta property="og:type" content="website" />

    <!-- Optimized Resource Loading -->
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cookie&display=swap" rel="stylesheet"> 

    <title>Hesten's Learning</title>

    <script>
        // --- Tailwind Configuration ---
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ["var(--site-font-family, 'Inter')", "sans-serif"],
                        dyslexic: ['"Open Dyslexic"', 'sans-serif'],
                        mono: ['"Roboto Mono"', 'monospace'],
                    },
                    colors: {
                        'primary': 'var(--color-primary, #1D4ED8)',
                        'secondary': 'var(--color-secondary, #3B82F6)',
                        'accent': 'var(--color-accent, #60A5FA)',
                        'base-bg': 'var(--color-base-bg, #F9FAFB)',
                        'content-bg': 'var(--color-content-bg, #FFFFFF)',
                        'text-default': 'var(--color-text-default, #1F2937)',
                        'text-secondary': 'var(--color-text-secondary, #6B7280)',
                        'header-bg': 'var(--color-header-bg)',
                    },
                    borderRadius: {
                        "base-rounded": "var(--border-radius-base, 0.75rem)",
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.5s ease-out forwards',
                        'bounce-short': 'bounceShort 1s ease-in-out',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        bounceShort: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                },
            },
        };
    </script>

    <style>
        /* CSS Variables & Theme Definitions */
        @font-face {
            font-family: 'Open Dyslexic';
            src: url('https://cdn.jsdelivr.net/npm/opendyslexic@2.1.0-beta1/charis-sil-modified/OpenDyslexic-Regular.woff') format('woff');
            font-display: swap;
        }

        body {
            background-color: var(--color-base-bg);
            background-image: var(--site-bg-gradient);
            background-attachment: fixed;
            background-size: cover;
            color: var(--color-text-default);
            font-size: var(--site-font-size, 1rem);
            line-height: var(--site-line-height, 1.6);
            transition: background-color 0.3s, color 0.3s, font-size 0.3s;
            min-height: 100vh;
            font-family: var(--site-font-family, "Inter", sans-serif);
            display: flex;
            flex-direction: column;
        }

        /* Light Theme */
        .light {
            --color-primary: #4F46E5;
            --color-secondary: #6366F1;
            --color-accent: #818CF8;
            --color-header-bg: #1F2937;
            --color-link: #4F46E5;
            --color-base-bg: #F3F4F6;
            --color-content-bg: #FFFFFF;
            --color-text-default: #1F2937;
            --color-text-secondary: #4B5563;
            --border-radius-base: 0.75rem;
            --site-bg-gradient: linear-gradient(120deg, #fdfbf7 0%, #f0fdfa 50%, #eff6ff 100%);
        }

        /* Dark Theme */
        .dark {
            --color-primary: #818CF8;
            --color-secondary: #A5B4FC;
            --color-accent: #C7D2FE;
            --color-header-bg: #111827;
            --color-base-bg: #111827;
            --color-content-bg: #1F2937;
            --color-text-default: #F3F4F6;
            --color-text-secondary: #D1D5DB;
            --border-radius-base: 0.75rem;
            --site-bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%);
        }

        /* High Contrast Theme */
        .high-contrast {
            --color-primary: #FFFF00;
            --color-secondary: #00FFFF;
            --color-accent: #00FFFF;
            --color-header-bg: #000000;
            --color-base-bg: #000000;
            --color-content-bg: #000000;
            --color-text-default: #FFFF00;
            --color-text-secondary: #FFFFFF;
            --border-radius-base: 0;
            --site-bg-gradient: none;
        }

        .high-contrast a { color: var(--color-link) !important; text-decoration: underline; }
        .high-contrast .bg-primary { background-color: #000000 !important; border: 2px solid #FFFF00 !important; color: #FFFF00 !important; }
        .high-contrast .bg-content-bg { border: 2px solid #FFFFFF; }

        /* Utilities */
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border-width: 0; }
        :focus-visible { outline: 3px solid var(--color-accent); outline-offset: 2px; }
        
        /* Reading Guide */
        #reading-mask { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.8); pointer-events: none; z-index: 50; }
        #reading-guide { position: absolute; width: 100%; height: 2.5rem; background: rgba(255, 255, 255, 0.1); border-top: 2px solid var(--color-base-bg); border-bottom: 2px solid var(--color-base-bg); cursor: ns-resize; pointer-events: auto; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: var(--color-base-bg); }
        ::-webkit-scrollbar-thumb { background: var(--color-primary); border-radius: 5px; }
    </style>
</head>

<body class="light antialiased font-sans overflow-x-hidden selection:bg-primary selection:text-white">

    <!-- Skip to Content Link -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[60] focus:px-4 focus:py-2 focus:bg-white focus:text-primary focus:font-bold focus:rounded-lg focus:shadow-xl">Skip to main content</a>

    <!-- Accessibility Button -->
    <button id="a11y-toggle-button" class="fixed bottom-6 right-6 z-50 p-4 bg-primary text-white rounded-full shadow-2xl hover:bg-secondary focus:outline-none focus:ring-4 focus:ring-accent transition-all duration-300 transform hover:scale-110" aria-label="Open Accessibility Settings">
        <i class="fas fa-universal-access text-2xl"></i>
    </button>

    <!-- Accessibility Panel -->
    <div id="a11y-settings-panel" class="fixed top-0 right-0 h-full w-80 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl shadow-2xl z-50 transform translate-x-full transition-transform duration-300 overflow-y-auto p-6 border-l border-white/20 ring-1 ring-black/5" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-bold text-primary">Accessibility</h2>
            <button id="a11y-close-button" class="text-text-secondary hover:text-text-default p-2 rounded-full" aria-label="Close settings"><i class="fas fa-times text-lg"></i></button>
        </div>
        <div class="space-y-6">
            <div>
                <h3 class="text-sm font-medium mb-2 text-text-default">Contrast & Theme</h3>
                <div class="flex space-x-2">
                    <button id="theme-light" class="flex-1 py-2 rounded-lg border hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700 dark:text-gray-200"><i class="fas fa-sun"></i> Light</button>
                    <button id="theme-dark" class="flex-1 py-2 rounded-lg border hover:bg-gray-100 dark:bg-gray-700 dark:text-white dark:border-gray-500"><i class="fas fa-moon"></i> Dark</button>
                    <button id="theme-contrast" class="flex-1 py-2 rounded-lg border hover:bg-gray-100 font-bold dark:border-gray-600 dark:text-gray-200"><i class="fas fa-low-vision"></i> High</button>
                </div>
            </div>
            <div>
                <h3 class="text-sm font-medium mb-2 text-text-default">Font Style</h3>
                <div id="font-selection-buttons" class="grid grid-cols-1 gap-2">
                    <button type="button" data-font="Inter" class="font-selector py-2 px-3 rounded border text-left text-sm bg-primary text-white">Standard (Inter)</button>
                    <button type="button" data-font="Open Dyslexic" class="font-selector py-2 px-3 rounded border text-left text-sm" style="font-family: 'Open Dyslexic';">Dyslexic Friendly</button>
                    <button type="button" data-font="Lexend" class="font-selector py-2 px-3 rounded border text-left text-sm" style="font-family: 'Lexend';">Lexend (High Legibility)</button>
                </div>
            </div>
            <div>
                <label class="block text-sm font-medium mb-2 text-text-default">Text Size (<span id="font-size-value">100</span>%)</label>
                <input type="range" id="font-size-slider" min="0.8" max="1.5" step="0.1" value="1.0" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
            </div>
            <div class="space-y-4 pt-4 border-t border-gray-200 dark:border-gray-700">
                <div class="flex items-center justify-between">
                    <label for="toggle-reading-mask" class="text-sm font-medium text-text-default">Reading Guide</label>
                    <input type="checkbox" id="toggle-reading-mask" class="w-12 h-6 rounded-full appearance-none bg-gray-300 checked:bg-primary transition-all relative cursor-pointer before:content-[''] before:absolute before:w-6 before:h-6 before:bg-white before:rounded-full before:shadow-sm before:transition-transform checked:before:translate-x-6">
                </div>
            </div>
            <button id="reset-a11y-settings" class="w-full bg-red-100 text-red-700 hover:bg-red-200 py-2 rounded-lg mt-4 text-sm font-bold transition-colors">Reset Settings</button>
        </div>
    </div>

    <!-- Reading Mask -->
    <div id="reading-mask" class="hidden">
        <div id="reading-guide" style="top: 30%"></div>
    </div>

    <!-- Announcement Bar -->
    <div id="announcement-bar" class="bg-primary text-white text-center py-2 px-8 relative transition-colors duration-300 shadow-md z-40">
        <p class="text-sm font-medium"><i class="fas fa-hammer mr-2"></i> Work in Progress: We are updating sections daily.</p>
        <button id="close-announcement" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-white/80 hover:text-white p-2 rounded-full"><i class="fas fa-times"></i></button>
    </div>

    <!-- HEADER -->
    <header class="bg-header-bg shadow-lg sticky top-0 z-40 transition-colors duration-300">
        <div class="container mx-auto px-4 py-3">
            <nav class="flex items-center justify-between flex-wrap">
                <!-- Logo -->
                <a class="flex items-center flex-shrink-0 text-white mr-6 rounded-lg p-1" href="#">
                    <div class="h-10 w-10 mr-3 border-2 border-white/20 rounded-full flex items-center justify-center bg-indigo-500 font-bold text-xl">H</div>
                    <span class="font-bold text-xl tracking-tight">Hesten's Learning</span>
                </a>

                <!-- Mobile Menu Button -->
                <div class="block lg:hidden">
                    <button id="nav-toggle" class="flex items-center px-3 py-2 border rounded text-gray-200 border-gray-400 hover:text-white hover:border-white">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>

                <!-- Nav Links -->
                <div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden transition-all duration-300" id="nav-content">
                    <div class="text-sm lg:flex-grow">
                        <a href="#" class="block mt-4 lg:inline-block lg:mt-0 mr-4 p-2 rounded-md bg-white/10 text-white font-bold"><i class="fas fa-home mr-1"></i> Home</a>
                        <a href="#" class="block mt-4 lg:inline-block lg:mt-0 mr-4 p-2 rounded-md text-gray-200 hover:text-white hover:bg-white/5"><i class="fas fa-book mr-1"></i> Learning</a>
                        <a href="#" class="block mt-4 lg:inline-block lg:mt-0 mr-4 p-2 rounded-md text-gray-200 hover:text-white hover:bg-white/5"><i class="fas fa-tasks mr-1"></i> Assessment</a>
                    </div>
                    <!-- Search -->
                    <div class="relative mt-4 lg:mt-0">
                        <form id="search-form" onsubmit="event.preventDefault();">
                            <label for="global-search-input" class="sr-only">Search</label>
                            <div class="relative group">
                                <input type="text" id="global-search-input" placeholder="Search site..." class="bg-gray-700/50 text-white rounded-full py-2 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-primary w-48 focus:w-64 transition-all placeholder-gray-400 border border-transparent" />
                                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 group-hover:text-white"></i>
                            </div>
                        </form>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- MAIN HERO -->
    <div class="relative bg-gradient-to-br from-indigo-600 via-blue-600 to-purple-600 dark:from-indigo-900 dark:via-blue-900 dark:to-purple-900 text-white pt-20 pb-20 px-4 rounded-b-[2.5rem] shadow-2xl overflow-hidden mb-12 border-b border-white/10">
        <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <i class="fas fa-shapes absolute top-10 left-10 text-8xl text-white/10 animate-pulse"></i>
            <i class="fas fa-calculator absolute bottom-20 right-10 text-[12rem] text-white/5 rotate-12"></i>
        </div>

        <div class="relative z-10 max-w-5xl mx-auto text-center">
            <div class="backdrop-blur-md bg-white/10 border border-white/20 p-8 md:p-12 rounded-3xl shadow-2xl animate-fade-in-up">
                <span class="inline-block py-1 px-4 rounded-full bg-black/20 text-white text-xs font-bold mb-6 tracking-wide uppercase border border-white/20 shadow-sm">Accessible Education for All</span>
                <h1 class="text-4xl md:text-6xl font-extrabold mb-6 tracking-tight leading-tight drop-shadow-lg text-white">
                    Learning Without <span class="text-transparent bg-clip-text bg-gradient-to-r from-teal-200 to-emerald-100">Limits</span>
                </h1>
                <p class="text-lg md:text-2xl mb-10 text-blue-50 max-w-3xl mx-auto leading-relaxed font-light drop-shadow-md">
                    Empowering every student with personalized, accessible, and engaging educational experiences designed for <span class="font-bold text-white border-b-2 border-teal-300/50">how you learn</span>.
                </p>
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <a href="#level-grid" class="bg-white text-blue-700 font-bold py-4 px-10 rounded-full shadow-lg transition-transform hover:scale-105 hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-white/50 text-lg flex items-center justify-center gap-2">
                        <span>Start Learning</span> <i class="fas fa-arrow-down"></i>
                    </a>
                </div>
            </div>

            <!-- Stats Bar -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-12 text-center">
                <div class="p-4 rounded-xl bg-black/20 backdrop-blur border border-white/10 shadow-lg">
                    <div class="text-3xl font-bold text-teal-300 mb-1 flex justify-center"><span id="user-progress-stat">0</span>%</div>
                    <div class="text-sm text-blue-100">Your Progress</div>
                </div>
                <div class="p-4 rounded-xl bg-black/20 backdrop-blur border border-white/10 shadow-lg">
                    <div class="text-3xl font-bold text-amber-300 mb-1" id="total-levels-stat">15</div>
                    <div class="text-sm text-blue-100">Grade Levels</div>
                </div>
                <div class="p-4 rounded-xl bg-black/20 backdrop-blur border border-white/10 shadow-lg">
                    <div class="text-3xl font-bold text-rose-300 mb-1"><i class="fas fa-check"></i></div>
                    <div class="text-sm text-blue-100">Free to Use</div>
                </div>
                <div class="p-4 rounded-xl bg-black/20 backdrop-blur border border-white/10 shadow-lg">
                    <div class="text-3xl font-bold text-violet-300 mb-1"><i class="fas fa-lock"></i></div>
                    <div class="text-sm text-blue-100">Private & Secure</div>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <main class="container mx-auto my-10 px-4 scroll-mt-24" id="main-content" tabindex="-1">
        
        <!-- Resume Banner -->
        <div id="resume-banner" class="hidden mb-12 bg-gradient-to-r from-teal-500 to-emerald-600 rounded-2xl p-1 shadow-lg transform hover:-translate-y-1 transition-all cursor-pointer group">
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 flex flex-col md:flex-row items-center justify-between gap-4 h-full border border-white/10">
                <div class="flex items-center gap-4 text-white">
                    <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center text-xl shrink-0 group-hover:scale-110 transition-transform shadow-inner"><i class="fas fa-play"></i></div>
                    <div>
                        <h2 class="text-xl font-bold">Welcome Back!</h2>
                        <p class="text-blue-50">Ready to continue with <span id="next-level-name" class="font-bold underline text-white decoration-amber-400 decoration-2"></span>?</p>
                    </div>
                </div>
                <button class="bg-white text-teal-700 px-8 py-3 rounded-full font-bold hover:bg-teal-50 transition-colors shadow-md">Resume Learning</button>
            </div>
        </div>

        <!-- Filter Controls -->
        <div class="bg-content-bg p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 mb-10 sticky top-4 z-30 transition-colors duration-300">
            <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                <div class="flex items-center gap-3">
                    <span class="w-2 h-8 bg-gradient-to-b from-primary to-accent rounded-full shadow-sm"></span>
                    <h2 class="text-2xl font-bold text-text-default">Select Your Grade</h2>
                </div>
                <div class="flex flex-col sm:flex-row gap-4 w-full md:w-auto items-center">
                    <!-- Search -->
                    <div class="relative w-full sm:w-64">
                        <label for="level-search" class="sr-only">Filter grades</label>
                        <input type="text" id="level-search" placeholder="Filter grades..." class="w-full pl-10 pr-10 py-2.5 rounded-full border border-gray-300 dark:border-gray-600 bg-base-bg text-text-default focus:ring-2 focus:ring-primary transition-all shadow-sm">
                        <i class="fas fa-filter absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                        <button id="clear-search" onclick="resetFilters()" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-primary hidden focus:outline-none"><i class="fas fa-times-circle"></i></button>
                    </div>
                    <!-- Categories -->
                    <div class="flex flex-wrap justify-center gap-2">
                        <button onclick="setCategory('all')" class="filter-btn active px-4 py-2 rounded-full text-sm font-bold bg-gray-800 text-white transition-all shadow-sm" data-filter="all">All</button>
                        <button onclick="setCategory('elem')" class="filter-btn px-4 py-2 rounded-full text-sm font-bold bg-teal-50 text-teal-700 hover:bg-teal-100 transition-all" data-filter="elem">Elem</button>
                        <button onclick="setCategory('middle')" class="filter-btn px-4 py-2 rounded-full text-sm font-bold bg-amber-50 text-amber-700 hover:bg-amber-100 transition-all" data-filter="middle">Middle</button>
                        <button onclick="setCategory('high')" class="filter-btn px-4 py-2 rounded-full text-sm font-bold bg-rose-50 text-rose-700 hover:bg-rose-100 transition-all" data-filter="high">High</button>
                    </div>
                </div>
            </div>
            <div class="mt-2 text-sm text-text-secondary text-right" id="results-count">Showing all levels</div>
        </div>

        <!-- Grid Container -->
        <section id="level-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></section>

        <!-- Empty State -->
        <div id="no-results" class="hidden text-center py-24 px-4">
            <div class="inline-block p-6 rounded-full bg-base-bg mb-4"><i class="fas fa-search text-4xl text-gray-300"></i></div>
            <h3 class="text-xl font-bold text-text-default mb-2">No levels found</h3>
            <p class="text-text-secondary mb-6">We couldn't find anything matching your search.</p>
            <button onclick="resetFilters()" class="text-primary font-bold hover:underline">Clear Search & Filters</button>
        </div>
    </main>

    <!-- FULL FOOTER -->
    <!-- Scroll to Top Button -->
    <button id="scroll-to-top"
    class="fixed bottom-8 right-8 z-50 w-12 h-12 bg-white/10 backdrop-blur-md border border-white/20 text-white rounded-full shadow-2xl hover:bg-white/20 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 transform translate-y-24 opacity-0 flex items-center justify-center print:hidden group">
    <i class="fas fa-arrow-up group-hover:animate-bounce-short"></i>
    </button>

    <footer class="mt-auto bg-slate-900 text-slate-300 relative overflow-hidden font-sans border-t border-slate-800/50 w-full">

        <!-- Decorative Elements -->
        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 shadow-[0_0_20px_rgba(79,70,229,0.5)]"></div>
        <div class="absolute -top-[400px] -right-[400px] w-[800px] h-[800px] bg-blue-600/10 rounded-full blur-[100px] pointer-events-none overflow-hidden"></div>
        <div class="absolute bottom-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5 pointer-events-none"></div>

        <div class="container mx-auto px-6 py-16 relative z-10">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-12">

                <!-- Brand Section (Col Span 4) -->
                <div class="lg:col-span-4 space-y-6">
                    <div class="flex items-center gap-3 group">
                        <div class="w-12 h-12 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-900/20 group-hover:rotate-6 transition-transform duration-300">
                            <span class="text-white font-bold text-2xl font-serif">H</span>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-2xl font-bold text-white tracking-tight leading-none group-hover:text-blue-400 transition-colors">Hesten's Learning</span>
                            <span class="text-xs text-slate-500 uppercase tracking-widest font-semibold mt-1">Education for All</span>
                        </div>
                    </div>
                    <p class="text-slate-400 leading-relaxed text-sm pr-4">
                        Empowering students with learning disabilities through personalized, accessible, and engaging educational experiences meant for everyone.
                    </p>
                    <div class="flex gap-3 pt-2">
                        <a href="mailto:admin@hestena62.com" class="w-10 h-10 rounded-lg bg-slate-800/50 border border-slate-700 flex items-center justify-center text-slate-400 hover:bg-emerald-600 hover:text-white hover:border-emerald-500 transition-all duration-300 group" aria-label="Email Us">
                            <i class="fas fa-envelope text-lg group-hover:scale-110 transition-transform"></i>
                        </a>
                    </div>
                </div>

                <!-- Quick Links (Col Span 2) -->
                <div class="lg:col-span-2">
                    <h4 class="text-white font-bold text-lg mb-6 flex items-center gap-2 uppercase tracking-wide text-sm opacity-80">
                        <i class="fas fa-compass text-blue-500 text-xs"></i> Explore
                    </h4>
                    <ul class="space-y-3 text-sm font-medium">
                        <li><a href="#" class="text-slate-400 hover:text-blue-400 transition-colors flex items-center gap-2 group"><span class="w-1.5 h-1.5 rounded-full bg-slate-600 group-hover:bg-blue-400 transition-colors"></span> Curriculum</a></li>
                        <li><a href="#" class="text-slate-400 hover:text-blue-400 transition-colors flex items-center gap-2 group"><span class="w-1.5 h-1.5 rounded-full bg-slate-600 group-hover:bg-blue-400 transition-colors"></span> Research</a></li>
                        <li><a href="#" class="text-slate-400 hover:text-blue-400 transition-colors flex items-center gap-2 group"><span class="w-1.5 h-1.5 rounded-full bg-slate-600 group-hover:bg-blue-400 transition-colors"></span> Standards</a></li>
                        <li><a href="#" class="text-slate-400 hover:text-blue-400 transition-colors flex items-center gap-2 group"><span class="w-1.5 h-1.5 rounded-full bg-slate-600 group-hover:bg-blue-400 transition-colors"></span> Games</a></li>
                    </ul>
                </div>

                <!-- Support (Col Span 2) -->
                <div class="lg:col-span-2">
                    <h4 class="text-white font-bold text-lg mb-6 flex items-center gap-2 uppercase tracking-wide text-sm opacity-80">
                        <i class="fas fa-life-ring text-purple-500 text-xs"></i> Support
                    </h4>
                    <ul class="space-y-3 text-sm font-medium">
                        <li><a href="#" class="text-slate-400 hover:text-purple-400 transition-colors flex items-center gap-2 group"><span class="w-1.5 h-1.5 rounded-full bg-slate-600 group-hover:bg-purple-400 transition-colors"></span> Help Center</a></li>
                        <li><a href="#" class="text-slate-400 hover:text-purple-400 transition-colors flex items-center gap-2 group"><span class="w-1.5 h-1.5 rounded-full bg-slate-600 group-hover:bg-purple-400 transition-colors"></span> Contact Us</a></li>
                        <li><a href="#" class="text-slate-400 hover:text-purple-400 transition-colors flex items-center gap-2 group"><span class="w-1.5 h-1.5 rounded-full bg-slate-600 group-hover:bg-purple-400 transition-colors"></span> Privacy Policy</a></li>
                        <li><a href="#" class="text-slate-400 hover:text-purple-400 transition-colors flex items-center gap-2 group"><span class="w-1.5 h-1.5 rounded-full bg-slate-600 group-hover:bg-purple-400 transition-colors"></span> Accessibility</a></li>
                    </ul>
                </div>

                <!-- Newsletter (Col Span 4) -->
                <div class="lg:col-span-4 bg-white/5 rounded-2xl p-6 border border-white/10 backdrop-blur-sm">
                    <h4 class="text-white font-bold text-lg mb-4 flex items-center gap-2">
                        <i class="fas fa-paper-plane text-pink-500"></i> Stay Connected
                    </h4>
                    <p class="text-slate-400 text-sm mb-4">Join our community to get the latest updates, learning resources, and tips directly to your inbox.</p>
                    <form class="space-y-3" onsubmit="event.preventDefault(); document.getElementById('newsletter-success').classList.remove('hidden');">
                        <div class="relative">
                            <input type="email" required placeholder="Enter your email address" class="w-full bg-slate-900/50 border border-slate-600 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all placeholder-slate-500 text-white">
                            <i class="fas fa-envelope absolute right-4 top-1/2 -translate-y-1/2 text-slate-500"></i>
                        </div>
                        <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-bold py-3 rounded-xl shadow-lg hover:shadow-blue-500/25 transition-all transform hover:-translate-y-0.5 active:scale-95">
                            Subscribe Now
                        </button>
                        <p id="newsletter-success" class="hidden text-green-400 text-xs text-center font-bold animate-pulse"><i class="fas fa-check-circle"></i> Thanks for subscribing!</p>
                    </form>
                </div>

            </div>

            <!-- Divider -->
            <div class="h-px bg-gradient-to-r from-transparent via-slate-700 to-transparent my-10"></div>

            <!-- Bottom Bar -->
            <div class="flex flex-col md:flex-row justify-between items-center gap-6 text-sm text-slate-500">
                <div class="text-center md:text-left space-y-2">
                    <p>&copy; <span id="year">2025</span> <span class="text-slate-300 font-semibold">Hesten's Learning</span>. All rights reserved.</p>
                    <p class="text-xs">
                        Made with <i class="fas fa-heart text-red-500 animate-pulse"></i> for education by <a href="#" class="text-slate-400 hover:text-white underline decoration-slate-600 hover:decoration-white underline-offset-2 transition-all">Hesten Allison</a>.
                    </p>
                </div>

                <div class="flex flex-wrap justify-center items-center gap-6">
                    <div class="gtranslate_wrapper"></div>

                    <a href="https://www.buymeacoffee.com/hestena62l" target="_blank" rel="noopener noreferrer" class="group relative inline-flex items-center gap-2 bg-[#FFDD00] text-black px-5 py-2.5 rounded-full font-bold font-['Cookie',cursive] text-lg hover:bg-[#ffe44d] transition-all shadow-lg hover:shadow-[#FFDD00]/30 transform hover:-translate-y-1">
                        <img src="https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg" alt="" class="h-5 w-5" loading="lazy">
                        <span>Buy me a coffee</span>
                        <div class="absolute inset-0 rounded-full ring-2 ring-white/50 group-hover:ring-4 transition-all opacity-0 group-hover:opacity-100"></div>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Global Modals (Message & Confirmation) -->
    <div id="message-box" class="fixed inset-0 bg-black/75 backdrop-blur-sm hidden items-center justify-center z-[100]" role="alertdialog" aria-modal="true" aria-labelledby="message-title">
        <div class="bg-content-bg rounded-xl shadow-2xl p-6 max-w-sm w-full text-center transform scale-100 transition-transform duration-300 border border-gray-200 dark:border-gray-700">
            <h4 id="message-title" class="text-xl font-bold mb-4 text-primary">Notification</h4>
            <p id="message-text" class="mb-6 text-text-default">This is a general message.</p>
            <button id="message-ok-button" class="bg-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-secondary transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-accent">OK</button>
        </div>
    </div>

    <div id="confirmation-modal" class="fixed inset-0 bg-black/75 backdrop-blur-sm hidden items-center justify-center z-[100]" role="dialog" aria-modal="true" aria-labelledby="confirmation-title">
        <div class="bg-content-bg rounded-xl shadow-2xl p-6 max-w-sm w-full text-center transform scale-100 transition-transform duration-300 border border-gray-200 dark:border-gray-700">
            <h4 id="confirmation-title" class="text-xl font-bold mb-4 text-red-500">Confirm Action</h4>
            <p id="confirmation-text" class="mb-6 text-text-default">Are you sure you want to proceed?</p>
            <div class="flex justify-center space-x-4">
                <button id="confirm-yes-button" class="bg-red-500 text-white px-6 py-2 rounded-lg font-semibold hover:bg-red-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-400">Yes</button>
                <button id="confirm-no-button" class="bg-gray-300 text-gray-800 px-6 py-2 rounded-lg font-semibold hover:bg-gray-400 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500">No</button>
            </div>
        </div>
    </div>

    <!-- Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js" defer></script>
    <!-- GTranslate -->
    <script>window.gtranslateSettings = { default_language: "en", native_language_names: true, wrapper_selector: ".gtranslate_wrapper", flag_style: "3d", alt_flags: { en: "usa" } };</script>
    <script src="https://cdn.gtranslate.net/widgets/latest/popup.js" defer></script>

    <!-- MAIN APPLICATION LOGIC -->
    <script>
        // --- DATA & CONFIG (Originally PHP) ---
        const learningLevels = [
            {id: 'pre-k', category: 'elem', title: 'Pre-K', description: 'Counting objects, letter names, rhyming words, and more. Foundational skills.', link: '#', icon: 'fas fa-shapes'},
            {id: 'kindergarten', category: 'elem', title: 'Kindergarten', description: 'Basic math concepts, phonics, early reading. Building blocks for a strong start.', link: '#', icon: 'fas fa-puzzle-piece'},
            {id: 'grade-1', category: 'elem', title: 'Grade 1', description: 'Adding, subtracting, sentence formation. Developing independence.', link: '#', icon: 'fas fa-pencil-alt'},
            {id: 'grade-2', category: 'elem', title: 'Grade 2', description: 'Basic multiplication, reading fluency. Expanding foundational knowledge.', link: '#', icon: 'fas fa-book-open'},
            {id: 'grade-3', category: 'elem', title: 'Grade 3', description: 'Multiplication, division, reading comprehension. Critical thinking.', link: '#', icon: 'fas fa-calculator'},
            {id: 'grade-4', category: 'elem', title: 'Grade 4', description: 'Advanced multiplication, division, reading comprehension. Deeper dives.', link: '#', icon: 'fas fa-divide'},
            {id: 'grade-5', category: 'elem', title: 'Grade 5', description: 'Decimals, essay writing, ecosystems. Preparing for middle school.', link: '#', icon: 'fas fa-atom'},
            {id: 'grade-6', category: 'middle', title: 'Grade 6', description: 'Fractions, essay writing, earth science. Transitioning to complex subjects.', link: '#', icon: 'fas fa-globe-americas'},
            {id: 'grade-7', category: 'middle', title: 'Grade 7', description: 'Proportional relationships, persuasive writing, life science. Middle school mastery.', link: '#', icon: 'fas fa-dna'},
            {id: 'grade-8', category: 'middle', title: 'Grade 8', description: 'Linear equations, historical analysis, earth science. Pre-high school readiness.', link: '#', icon: 'fas fa-history'},
            {id: 'grade-9', category: 'high', title: 'Grade 9', description: 'Algebra, literature, physical science. Introduction to high school.', link: '#', icon: 'fas fa-flask'},
            {id: 'grade-10', category: 'high', title: 'Grade 10', description: 'Geometry, world history, biology. Broadening academic horizons.', link: '#', icon: 'fas fa-project-diagram'},
            {id: 'grade-11', category: 'high', title: 'Grade 11', description: 'Pre-calculus, advanced literature, chemistry. College prep.', link: '#', icon: 'fas fa-microscope'},
            {id: 'grade-12', category: 'high', title: 'Grade 12', description: 'Advanced calculus, literature analysis, physics. Final preparations.', link: '#', icon: 'fas fa-graduation-cap'},
            {id: 'test-section', category: 'extra', title: 'Test/Extra', description: 'Practice with quizzes, review extra materials, and challenge yourself.', link: '#', icon: 'fas fa-star'}
        ];

        const themeMap = {
            'elem': { border: 'border-teal-400 dark:border-teal-500', icon_bg: 'bg-teal-100 dark:bg-teal-900', icon_text: 'text-teal-600 dark:text-teal-300', hover: 'hover:border-teal-500', btn: 'hover:bg-teal-500 hover:text-white', accent: 'text-teal-600 dark:text-teal-400' },
            'middle': { border: 'border-amber-400 dark:border-amber-500', icon_bg: 'bg-amber-100 dark:bg-amber-900', icon_text: 'text-amber-600 dark:text-amber-300', hover: 'hover:border-amber-500', btn: 'hover:bg-amber-500 hover:text-white', accent: 'text-amber-600 dark:text-amber-400' },
            'high': { border: 'border-rose-400 dark:border-rose-500', icon_bg: 'bg-rose-100 dark:bg-rose-900', icon_text: 'text-rose-600 dark:text-rose-300', hover: 'hover:border-rose-500', btn: 'hover:bg-rose-500 hover:text-white', accent: 'text-rose-600 dark:text-rose-400' },
            'extra': { border: 'border-violet-400 dark:border-violet-500', icon_bg: 'bg-violet-100 dark:bg-violet-900', icon_text: 'text-violet-600 dark:text-violet-300', hover: 'hover:border-violet-500', btn: 'hover:bg-violet-500 hover:text-white', accent: 'text-violet-600 dark:text-violet-400' }
        };

        // --- STATE ---
        let currentCategory = 'all';
        let completedLevels = [];
        let searchTimeout = null;

        // --- INIT ---
        document.addEventListener("DOMContentLoaded", () => {
            loadSettings();
            loadProgress();
            renderGrid();
            checkResumeLearning();
            document.getElementById("year").textContent = new Date().getFullYear();

            // Mobile Nav
            document.getElementById("nav-toggle")?.addEventListener("click", () => {
                document.getElementById("nav-content").classList.toggle("hidden");
            });

            // Search Debounce
            document.getElementById('level-search')?.addEventListener('input', () => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(applyFilters, 250);
            });
        });

        // --- RENDER GRID ---
        function renderGrid() {
            const grid = document.getElementById('level-grid');
            grid.innerHTML = ''; // Clear

            learningLevels.forEach(level => {
                const theme = themeMap[level.category] || themeMap['elem'];
                
                // Construct HTML String
                const cardHTML = `
                <article class="level-card group relative flex flex-col h-full" 
                    data-category="${level.category}" 
                    data-title="${level.title.toLowerCase()}" 
                    data-desc="${level.description.toLowerCase()}" 
                    data-id="${level.id}">
                    
                    <div class="bg-content-bg h-full rounded-2xl shadow-lg border-t-8 ${theme.border} border-l border-r border-b border-gray-100 dark:border-gray-700 hover:border-transparent ${theme.hover} transition-all duration-300 p-8 flex flex-col overflow-hidden hover:shadow-2xl hover:-translate-y-1">
                        
                        <!-- Background Icon -->
                        <div class="absolute -right-6 -bottom-6 text-[8rem] opacity-5 transform rotate-12 group-hover:scale-110 transition-transform duration-500 pointer-events-none ${theme.accent}">
                            <i class="${level.icon}"></i>
                        </div>

                        <!-- Action Buttons -->
                        <div class="absolute top-4 right-4 flex gap-2 z-20">
                            <button type="button" class="w-10 h-10 rounded-full bg-base-bg text-text-secondary hover:text-primary hover:bg-primary/10 transition-colors flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-primary shadow-sm" onclick="toggleSpeech(this, '${level.title}', '${level.description}')">
                                <i class="fas fa-volume-up"></i>
                            </button>
                            <button type="button" class="completion-toggle w-10 h-10 rounded-full bg-base-bg text-text-secondary hover:text-green-600 hover:bg-green-100 transition-colors flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-green-500 shadow-sm" onclick="toggleCompletion('${level.id}', this)">
                                <i class="fas fa-check"></i>
                            </button>
                        </div>

                        <!-- Header -->
                        <div class="flex items-center gap-4 mb-4 relative z-10">
                            <div class="w-12 h-12 rounded-xl flex items-center justify-center text-xl shadow-inner transition-colors ${theme.icon_bg} ${theme.icon_text}">
                                <i class="${level.icon}"></i>
                            </div>
                            <h3 class="text-xl font-bold text-text-default group-hover:text-current transition-colors ${theme.accent}">${level.title}</h3>
                        </div>

                        <!-- Description -->
                        <p class="text-text-secondary mb-8 flex-grow leading-relaxed relative z-10">${level.description}</p>

                        <!-- Link -->
                        <a href="${level.link}" class="mt-auto relative z-10 w-full flex justify-between items-center bg-base-bg text-text-default font-bold py-3 px-6 rounded-xl transition-all duration-300 group-focus:ring-4 ${theme.btn}">
                            <span>Explore Skills</span>
                            <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                        </a>
                    </div>
                </article>`;
                grid.insertAdjacentHTML('beforeend', cardHTML);
            });
            updateProgressUI();
        }

        // --- FILTERING ---
        function setCategory(cat) {
            currentCategory = cat;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (btn.dataset.filter === cat) {
                    btn.classList.remove('bg-gray-200', 'text-gray-700', 'bg-teal-50', 'bg-amber-50', 'bg-rose-50');
                    if (cat === 'all') btn.classList.add('bg-gray-800', 'text-white');
                    else if (cat === 'elem') btn.classList.add('bg-teal-500', 'text-white');
                    else if (cat === 'middle') btn.classList.add('bg-amber-500', 'text-white');
                    else if (cat === 'high') btn.classList.add('bg-rose-500', 'text-white');
                } else {
                    btn.className = 'filter-btn px-4 py-2 rounded-full text-sm font-bold transition-all'; // Reset
                    if (btn.dataset.filter === 'all') btn.classList.add('bg-gray-200', 'text-gray-700');
                    else if (btn.dataset.filter === 'elem') btn.classList.add('bg-teal-50', 'text-teal-700', 'hover:bg-teal-100');
                    else if (btn.dataset.filter === 'middle') btn.classList.add('bg-amber-50', 'text-amber-700', 'hover:bg-amber-100');
                    else if (btn.dataset.filter === 'high') btn.classList.add('bg-rose-50', 'text-rose-700', 'hover:bg-rose-100');
                }
            });
            applyFilters();
        }

        function applyFilters() {
            const input = document.getElementById('level-search');
            const term = input.value.toLowerCase().trim();
            const clearBtn = document.getElementById('clear-search');
            if (term) clearBtn.classList.remove('hidden'); else clearBtn.classList.add('hidden');

            const cards = document.querySelectorAll('.level-card');
            let visible = 0;

            cards.forEach(card => {
                const matchesCat = currentCategory === 'all' || card.dataset.category === currentCategory;
                const matchesSearch = !term || card.dataset.title.includes(term) || card.dataset.desc.includes(term);

                if (matchesCat && matchesSearch) {
                    card.classList.remove('hidden');
                    visible++;
                } else {
                    card.classList.add('hidden');
                }
            });

            const grid = document.getElementById('level-grid');
            const noResults = document.getElementById('no-results');
            const countMsg = document.getElementById('results-count');

            if (visible === 0) {
                grid.classList.add('hidden');
                noResults.classList.remove('hidden');
                countMsg.textContent = 'No results found';
            } else {
                grid.classList.remove('hidden');
                noResults.classList.add('hidden');
                countMsg.textContent = `Showing ${visible} result${visible !== 1 ? 's' : ''}`;
            }
        }

        function resetFilters() {
            document.getElementById('level-search').value = '';
            setCategory('all');
        }

        // --- PROGRESS SYSTEM ---
        function loadProgress() {
            try {
                const stored = localStorage.getItem('hl_completed_levels');
                if (stored) completedLevels = JSON.parse(stored);
            } catch (e) { }
        }

        function saveProgress() {
            localStorage.setItem('hl_completed_levels', JSON.stringify(completedLevels));
        }

        function toggleCompletion(id, btn) {
            const index = completedLevels.indexOf(id);
            if (index > -1) {
                completedLevels.splice(index, 1);
            } else {
                completedLevels.push(id);
                if (typeof confetti === 'function') {
                    const rect = btn.getBoundingClientRect();
                    confetti({ particleCount: 60, spread: 60, origin: { x: rect.left / window.innerWidth, y: rect.top / window.innerHeight } });
                }
            }
            saveProgress();
            updateProgressUI();
            checkResumeLearning();
        }

        function updateProgressUI() {
            document.querySelectorAll('.completion-toggle').forEach(btn => {
                const id = btn.closest('.level-card').dataset.id;
                if (completedLevels.includes(id)) {
                    btn.classList.add('bg-green-500', 'text-white');
                    btn.classList.remove('bg-base-bg', 'text-text-secondary');
                    btn.closest('.level-card').querySelector('.bg-content-bg').classList.add('ring-2', 'ring-green-400');
                } else {
                    btn.classList.remove('bg-green-500', 'text-white');
                    btn.classList.add('bg-base-bg', 'text-text-secondary');
                    btn.closest('.level-card').querySelector('.bg-content-bg').classList.remove('ring-2', 'ring-green-400');
                }
            });
            const total = learningLevels.length;
            const count = completedLevels.length;
            const pct = total ? Math.round((count / total) * 100) : 0;
            document.getElementById('user-progress-stat').textContent = pct;
        }

        // --- RESUME BANNER ---
        function checkResumeLearning() {
            const banner = document.getElementById('resume-banner');
            if (!banner) return;
            if (completedLevels.length === 0) {
                banner.classList.add('hidden');
                return;
            }
            const nextLevel = learningLevels.find(l => !completedLevels.includes(l.id));
            if (nextLevel) {
                document.getElementById('next-level-name').textContent = nextLevel.title;
                banner.onclick = () => window.location.href = nextLevel.link;
                banner.classList.remove('hidden');
            } else {
                banner.classList.add('hidden');
            }
        }

        // --- TTS ---
        function toggleSpeech(btn, title, desc) {
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
                if (btn.classList.contains('speaking')) {
                    btn.classList.remove('speaking', 'text-primary', 'animate-pulse');
                    btn.innerHTML = '<i class="fas fa-volume-up"></i>';
                    return;
                }
            }
            document.querySelectorAll('.speaking').forEach(b => {
                b.classList.remove('speaking', 'text-primary', 'animate-pulse');
                b.innerHTML = '<i class="fas fa-volume-up"></i>';
            });
            const utterance = new SpeechSynthesisUtterance(`${title}. ${desc}`);
            utterance.onend = () => {
                btn.classList.remove('speaking', 'text-primary', 'animate-pulse');
                btn.innerHTML = '<i class="fas fa-volume-up"></i>';
            };
            btn.classList.add('speaking', 'text-primary', 'animate-pulse');
            btn.innerHTML = '<i class="fas fa-stop"></i>';
            window.speechSynthesis.speak(utterance);
        }

        // --- GLOBAL MODAL FUNCTIONS (Restored) ---
        const messageBox = document.getElementById("message-box");
        const messageText = document.getElementById("message-text");
        const messageOkButton = document.getElementById("message-ok-button");
        const confirmationModal = document.getElementById("confirmation-modal");
        const confirmationText = document.getElementById("confirmation-text");
        const confirmYesButton = document.getElementById("confirm-yes-button");
        const confirmNoButton = document.getElementById("confirm-no-button");

        window.showMessageBox = function (message) {
            if (!messageBox || !messageText || !messageOkButton) return;
            messageText.textContent = message;
            messageBox.classList.remove("hidden");
            messageBox.style.display = 'flex';
            
            messageOkButton.onclick = () => {
                messageBox.classList.add("hidden");
                messageBox.style.display = 'none';
            };
        }

        window.showConfirmationModal = function (message, onConfirm) {
            if (!confirmationModal) return;
            confirmationText.textContent = message;
            confirmationModal.classList.remove("hidden");
            confirmationModal.style.display = 'flex';

            const closeConfirm = () => {
                confirmationModal.classList.add("hidden");
                confirmationModal.style.display = 'none';
            };

            confirmYesButton.onclick = () => { closeConfirm(); onConfirm(true); };
            confirmNoButton.onclick = () => { closeConfirm(); onConfirm(false); };
        }

        // --- SETTINGS / ACCESSIBILITY ---
        const defaultSettings = { theme: 'light', fontSize: 1.0, lineHeight: 1.6, fontFamily: 'Inter' };
        const STORAGE_KEY = 'hl_accessibility_settings';
        let currentSettings = defaultSettings;

        function loadSettings() {
            try {
                const stored = localStorage.getItem(STORAGE_KEY);
                currentSettings = stored ? { ...defaultSettings, ...JSON.parse(stored) } : defaultSettings;
                applySettings(currentSettings);
                initSettingsUI();
            } catch (e) { }
        }

        function saveSettings(settings) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(settings));
            applySettings(settings);
            currentSettings = settings;
        }

        function applySettings(settings) {
            document.documentElement.style.setProperty('--site-font-size', `${settings.fontSize}rem`);
            document.documentElement.style.setProperty('--site-line-height', settings.lineHeight);
            let fontName = settings.fontFamily;
            if(fontName.includes(' ') || fontName === 'Open Dyslexic') fontName = `"${fontName}"`;
            document.documentElement.style.setProperty('--site-font-family', fontName);
            document.body.classList.remove('light', 'dark', 'high-contrast');
            document.body.classList.add(settings.theme);
        }

        function initSettingsUI() {
            // A11y Panel Toggle
            const panel = document.getElementById('a11y-settings-panel');
            const toggle = document.getElementById('a11y-toggle-button');
            const close = document.getElementById('a11y-close-button');
            
            if(toggle && panel) {
                toggle.onclick = () => panel.classList.remove('translate-x-full');
                close.onclick = () => panel.classList.add('translate-x-full');
            }

            // Theme Buttons
            document.getElementById('theme-light')?.addEventListener('click', () => saveSettings({...currentSettings, theme: 'light'}));
            document.getElementById('theme-dark')?.addEventListener('click', () => saveSettings({...currentSettings, theme: 'dark'}));
            document.getElementById('theme-contrast')?.addEventListener('click', () => saveSettings({...currentSettings, theme: 'high-contrast'}));

            // Fonts
            document.querySelectorAll('.font-selector').forEach(btn => {
                btn.onclick = (e) => {
                    const font = e.target.dataset.font;
                    saveSettings({...currentSettings, fontFamily: font});
                    document.querySelectorAll('.font-selector').forEach(b => {
                        b.classList.remove('bg-primary', 'text-white');
                        if(b.dataset.font === font) b.classList.add('bg-primary', 'text-white');
                    });
                };
            });

            // Sliders
            const fontSlider = document.getElementById('font-size-slider');
            if(fontSlider) {
                fontSlider.value = currentSettings.fontSize;
                fontSlider.oninput = (e) => {
                    document.getElementById('font-size-value').textContent = Math.round(e.target.value * 100);
                    saveSettings({...currentSettings, fontSize: e.target.value});
                };
            }
        }
        
        // Scroll To Top
        const scrollBtn = document.getElementById("scroll-to-top");
        if(scrollBtn) {
            window.addEventListener("scroll", () => {
                if(window.scrollY > 300) scrollBtn.classList.remove("translate-y-24", "opacity-0");
                else scrollBtn.classList.add("translate-y-24", "opacity-0");
            }, {passive: true}); // Optimized scroll listener
            scrollBtn.onclick = () => window.scrollTo({ top: 0, behavior: "smooth" });
        }
    </script>
</body>
</html>